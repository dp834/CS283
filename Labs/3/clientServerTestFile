GET /Makefile HTTP/1.1
Host: localhost
Connection: close

CC	= gcc
CFLAGS = -Wall -Og -g -I $(CSAPP_INC) -I . 
LDLIBS = -lpthread

all: server client

csapp.o: csapp.c
	$(CC) -c csapp.c

client: client.c csapp.o
	$(CC) -o $@ $< csapp.o $(LDFLAGS) $(LDLIBS)

server: server.c csapp.o
	$(CC) -o $@ $< csapp.o $(LDFLAGS) $(LDLIBS)

%: %.c csapp.o
	$(CC) -o $@ $< csapp.o $(LDFLAGS) $(LDLIBS)
	./$@

test: server client
	./client www.google.com 80 index.html > clientTestFile
	./server  8080 & > serverTestFile
	./client localhost 8080 Makefile > clientServerTestFile
	killall server	

clean:
	\rm *.o client server

